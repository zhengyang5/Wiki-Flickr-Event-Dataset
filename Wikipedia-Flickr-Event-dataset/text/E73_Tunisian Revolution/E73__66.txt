A state of emergency is in place in Tunisia tonight after another day of bloody clashes between security forces and protesters which forced the president to dismiss his entire government.

Amid escalating violence in the capital, Tunis, the state news agency said the president, Zine al-Abidine Ben Ali, would call fresh legislative elections in six months. He also declared the state of emergency, which bans more than three people from gathering together in the open and imposes a night-time curfew.

The developments came after riot police fired teargas at a peaceful demonstration. Gunshots were heard in central Tunis, where thousands of people had gathered to demand Ben Ali's immediate resignation.

The Guardian's Angelique Chrisafis, who was with the protesters, tweeted: "Running battles amid extreme violence from police. Protesters being chased on to rooftops. This is turning very, very bad.

"Gunshots are now ringing around us and in the other sidestreets around interior ministry."

Earlier she said police officers had attacked a peaceful crowd outside the interior ministry. "People who have fled into side streets being cornered and soaked with teargas while secret police pick them off and beat them."

A total of 23 people are known to have died – many shot by police – since the protests began a month ago. Independent estimates put the toll several times higher. Another 12 people were killed last night in Tunis and the north-eastern town of Ras Jebel, medical sources and a witness told Reuters.

This morning outside the interior ministry a crowd including students, doctors, former political prisoners and lawyers in their robes assembled amid a mood of cautious optimism following Ben Ali's surprise announcement that he would not seek re-election in 2014, when his term ends.

The 74-year-old president, in office since 1987, said police would stop shooting at demonstrators. He called for freedom of the press and the lowering of sugar, milk and bread prices – one of the protesters' key complaints.

"I understand the Tunisians, I understand their demands," Ben Ali said. "I am sad about what is happening now after 50 years of service to the country, military service, all the different posts, 23 years of the presidency."

Today's protest, organised by Tunisia's only legal trade union, was called to demand the president step down immediately. In unprecedented scenes for the heavily policed county the crowd chanted "Bread, water, Ben Ali out!" and carried placards calling him a murderer.

One of the demonstrators, Nabil Montasser, a university researcher, told the Guardian: "It's time for him to leave. It's time for him to prove with actions that he meant what he said in the speech."

Initially secret police and other security services kept a low profile. The trigger for the crackdown appeared to be a few protesters climbing on to the roof of the interior ministry, a hated symbol of Ben Ali's regime.

The protests began a month ago when an unemployed graduate burned himself to death after police tried to stop him selling vegetables without a permit.

The British Foreign Office has advised against all but essential travel to Tunisia. The tour operator Thomas Cook has said it is flying home about 1,800 British customers from the country.

"As a result of the current political unrest and demonstrations taking place in Tunisia, Thomas Cook UK and Ireland can confirm that it is bringing home its holidaymakers who are currently in the country's tourist resorts," the company said in a statement.

The security services' firing on demonstrators has been condemned by France, which ruled the country until 1956, as well as the US, EU and UN.