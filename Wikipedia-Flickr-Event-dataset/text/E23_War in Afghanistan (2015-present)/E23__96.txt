“U.S. troops in the convoy then began to aid injured civilians but were quickly surrounded by an angry crowd of 300 to 500 men, said a U.S. military spokesman.

KABUL, Afghanistan – U.S. military officials acknowledged Wednesday that American troops had fired at an angry mob that surrounded the scene of a traffic accident in the Afghan capital Monday morning. Officials previously had said the troops fired only in the air.

In the fatal accident, the driver of a U.S. military cargo truck lost control and struck 12 vehicles in rush-hour traffic, killing one person and injuring six. The incident sparked violent, day-long riots that ended with 20 dead, 160 injured and dozens of buildings badly damaged.

The incident has exposed deep public resentment against the presence of foreign troops here and shaken investor confidence in the fledgling postwar economy at a time when Afghanistan faces a mounting threat from armed Taliban fighters and other insurgents in the countryside.

“Initial indications from our investigation are that coalition soldiers did in fact use their weapons in self-defense,” Col. Thomas Collins, a U.S. military spokesman, said at a news conference here. He said it appeared that gunfire had come from the crowd and that the troops had “used their weapons to defend themselves.”

Several people taken to hospitals in Kabul on Monday were suffering from gunshot wounds, but it was not clear who had shot them. During the day, rioters clashed repeatedly with Afghan police and burned down their checkpoints. Some rioters were armed with AK-47 assault rifles, witnesses said.

Collins repeatedly expressed regret for the accident and the deaths. But he also said the truck driver had done everything possible to avoid hitting pedestrians and occupied vehicles after his brakes failed on a steep hill leading down to a busy intersection.

After the accident, he said, U.S. troops in the convoy began to aid injured civilians but were quickly surrounded by an angry crowd of 300 to 500 men who started to throw stones at them. He said city police soon arrived and formed a barricade around the halted convoy, but that the crowd became increasingly hostile. The U.S. troops decided to leave, firing some shots in the process, he said.

Collins said no U.S. soldier had been injured, but he added, “that doesn’t mean they were not in serious, immediate danger of injury or death.” He said victims of the accident and their families would be compensated.

As word of the accident and possible civilian shootings spread through the city, enraged mobs swarmed into downtown Kabul, attacking banks, hotels and foreign aid offices and burning dozens of cars. It was the worst violence the Afghan capital has seen since the overthrow of the Taliban in 2001.