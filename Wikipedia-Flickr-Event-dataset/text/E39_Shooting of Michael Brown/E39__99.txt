Michael Brown robbed a Ferguson, Missouri, convenience store of two handfuls of cigarillos just minutes before Officer Darren Wilson fatally shot him on Aug. 9, according to his friend Dorian Johnson’s testimony before a St. Louis County grand jury. Wilson testified Brown’s possession of the cigarillos was the impetus behind the encounter that ultimately led to his death.

Wilson avoided indictment on criminal charges Monday after the grand jury decided there was a lack of probable cause to suggest that he committed a crime. The decision generated widespread outrage, particularly in Ferguson, where police used tear gas to subdue crowds that started fires and destroyed property.

In the days and months after Brown’s death, the convenience store robbery was considered a major factor in determining his and Wilson’s motives during their fatal encounter. Initial documents identified Brown as the prime suspect in the theft, which was captured on video, but Ferguson Police Chief Thomas Jackson said Aug. 15 Wilson did not stop Brown on suspicion of robbery. Wilson’s supporters pointed to the robbery as proof of Brown’s moral failings while critics said Wilson’s actions were reprehensible whether Brown was guilty or not.

Johnson, 22, who lived near Brown, had known “Big Mike” for about three months by the time of his death. The pair didn’t hang out every day, but Johnson felt comfortable enough with Brown to introduce him to his girlfriend and young daughter. He tried to mentor the younger man, he said, and the two would discuss anything from the latest sports news to their plans for the future.

On the morning of Aug. 9, Johnson, who was out of work, decided to start off his day by smoking marijuana, an act that constituted a regular part of his routine, according to the personal account he provided to the grand jury. Typically, Johnson would buy cigarillos from a man who lived in his apartment complex. But, on his way out of his apartment, Johnson encountered Brown, who offered to “match” him, or provide an equal amount of marijuana and cigarillos that would then be shared. Eventually, the pair walked to a local convenience store to buy cigarillos.

Johnson testified he had planned to pay for the cigarillos, but Brown reached over the counter and grabbed them. Brown walked toward the door and the store clerk rushed around the counter to prevent his exit. He shoved the clerk and left the store. As they walked out, the clerk said he would call the police.

“I asked [Brown], I looked at him, actually, looked at him for a while and stared at him because the times when I did meet him before that day, he didn’t strike me as a person who would do anything like that. … He was basically laughing it off, be cool, be calm, stuff like that, laughing it off, but in my head I’m like, I can’t be calm, I can’t be cool because I know what just happened and we were on camera,” Johnson said.

On their way toward their apartment complex, Johnson and Brown saw the first of three Ferguson police cruisers. The first car didn’t stop and continued on to a McDonald’s parking lot. Brown walked down the street with the cigarillos in plain sight, adjusting his haul so that he had an approximately equal number of the miniature cigars in each hand. Johnson saw a second police cruiser. Again, he and Brown were not stopped.

But as Johnson and Brown walked down the middle of Canfield Drive, they encountered Wilson’s police cruiser. Wilson testified he told the pair to move to the sidewalk, prompting a vulgar response from Brown. “It was a very unusual and not expected response from a simple request,” Wilson told the grand jury.

Then, Wilson noticed the cigarillos in Brown’s hand. The store clerk had reported the robbery earlier that morning. Wilson identified Brown and Johnson as potential suspects.

“When I start looking at Brown, first thing I notice is in his right hand, his hand is full of cigarillos. And that’s when it clicked for me because I now saw the cigarillos, I looked in my mirror, I did a doublecheck that Johnson was wearing a black shirt, these are the two from the stealing,” Wilson testified.

He reversed his car in a bid to cut off the pair’s path. At that point, Wilson and Brown engaged in the fatal altercation that led to endless debate and prompted months of protests against Ferguson Police. Johnson testified Wilson initiated physical contact, that he never saw Brown throw a punch and that Brown was outside the police cruiser when Wilson shot him.

Wilson testified he acted in self-defense after Brown punched him and attempted to grab his gun. During the struggle for the gun, he said, Brown “had the most intense aggressive face. The only way I can describe it, it looks like a demon, that’s how angry he looked.”