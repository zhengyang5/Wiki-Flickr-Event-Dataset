Image copyright AFP Image caption Several government buildings have been taken over by protesters in recent days

The Ukrainian parliament has passed a law providing amnesty to protesters detained during recent unrest.

Opposition parties abstained from voting, in anger at a condition in the bill which means it will only apply if protesters abandon government buildings they have occupied in recent days.

Protesters on the streets of the capital also rejected the move.

The protests began in November after President Viktor Yanukovych reversed a decision to sign an EU trade deal.

The next month he signed a $15bn-worth (£9.2bn; 10.9bn euros) bailout deal with Russia.

On Wednesday, the EU's top foreign policy chief said she was "shocked" by the deadly violence in the capital and across the country in recent weeks.

Catherine Ashton - who was in Kiev for talks with Mr Yanukovych and opposition groups - said Ukraine needed "a political process that is engaged in quickly and properly by everyone".

"The responsibility is inevitably going to fall on government to do that as quickly as possible," she said.

Resignations

Late on Wednesday, the amnesty bill was passed by 232 votes to 11, with the backing of Mr Yanukovych's majority Party of the Regions.

Image copyright Reuters Image caption Majority party MPs celebrated as the result was announced in parliament

But 173 MPs did not vote, and there were shouts of protest from opposition members.

Ukraine unrest - key dates 21 Nov 2013: Ukraine announces it will not sign a deal aimed at strengthening ties with the EU 30 Nov: Riot police detain dozens of anti-government protesters in a violent crackdown in Kiev 17 Dec: Russia agrees to buy $15bn of Ukrainian government bonds and slash the price of gas it sells to the country 16 Jan 2014: Parliament passes law restricting the right to protest 22 Jan: Two protesters die from bullet wounds during clashes with police in Kiev; protests spread across many cities 25 Jan: President Yanukovych offers senior jobs to the opposition, including that of prime minister, but these are rejected 28 Jan: Parliament votes to annul protest law and President Yanukovych accepts resignation of PM and cabinet 29 Jan: Parliament passes amnesty law for detained protesters, under the condition occupied buildings are vacated In pictures: PM resigns Ukraine's protest leaders Q&A: Stand-off in Ukraine

"Parliament has just passed a law on hostages," said Oleh Tyahnybok, leader of the far-right group Svoboda (Freedom) and a key figure in the protests.

"The authorities have themselves recognised that they are taking hostages as terrorists do, so they can trade the hostages," he said.

One protester in the main camp in Kiev's Independence Square told the Associated Press: "Is this a compromise, or are these political prisoners?"

"We will seize new buildings, if the authorities don't really change the situation in the country," said Artem Sharai.

Pro-EU protesters have taken over a number of properties in Kiev and other cities which they are using as operation centres and dormitories, and to seek refuge from the freezing conditions outside.

The BBC's Duncan Crawford in Kiev says the political crisis has not gone away with the amnesty, and the protesters will remain on the streets.

Boxer-turned-protest leader Vitaly Klitschko told the crowds gathered in Independence Square that the fight would go on.

"Instead of reducing the degree (of tension) in society, (it will do) the opposite, (the) temperature will be rising," Interfax news agency quoted him saying.

Mr Klitschko said the opposition's position remained "the same" - it will seek the release of the arrested activists.

Our correspondent says Mr Klitschko knows the protesters will not go home unless President Yanukovych stands down and calls elections, and signs the long-awaited trade deal with the EU.

Image copyright Reuters Image caption Protesters have been on the streets in freezing conditions for months

On Tuesday, in a concession to the protesters, parliament revoked controversial laws cracking down on demonstrations. The laws, introduced two weeks ago, had further inflamed their anger.

President Yanukovych also accepted the resignation of the Prime Minister Mykola Azarov and his cabinet, but neither measure ended the stand-off.

Moscow, meanwhile, has indicated that it may hold back some of a promised bailout package until a new government is formed.

The loans, worth $15bn (£9.2bn; 10.9bn euros), were widely seen as a reward for Kiev's rejection of the EU deal.