The issue is a difficult one for Mr. Obama, whose campaign pledge to “end the war” ignited his supporters and helped catapult him into the White House. But as Mr. Obama has begun meeting with his new military advisers — the top two, Defense Secretary Robert M. Gates and Adm. Mike Mullen, the chairman of the Joint Chiefs of Staff, are holdovers from the Bush administration — it has become clear that his definition of ending the war means leaving behind many thousands of American troops.

One reason is that Mr. Obama is facing rapidly approaching, and overlapping, withdrawal deadlines, some set by the Bush administration and the Iraqis, and some set by him.

After June 2009 looms May 2010, 16 months after Mr. Obama’s inauguration, the month he set during the campaign to have American combat forces out of Iraq entirely. Next comes December 2011, the deadline in the status-of-forces agreement to have all American troops out of Iraq.

To try to meet those deadlines without risking Iraq’s fragile and relative stability, military planners say they will reassign some combat troops to training and support of the Iraqis, even though the troops would still be armed and go on combat patrols with their Iraqi counterparts. So although their role would be redefined, the dangers would not.

“If you’re in combat, it doesn’t make any difference whether you’re an adviser: you’re risking your life,” said Andrew Krepinevich, a military expert at the Center for Strategic and Budgetary Assessments, a research group. “The bullets don’t have ‘adviser’ stenciled on some and ‘combat unit’ on another.”

There are 146,000 American troops in Iraq, including service and support personnel. Gen. Ray Odierno, the top commander in Iraq, declined to tell reporters this month how many troops might remain in cities after the June 2009 deadline, and said the exact number still had to be negotiated with the Iraqis.

But some experts, like Michael E. O’Hanlon, a senior fellow in at the Brookings Institution, argue that roughly 10,000 American troops should remain in Baghdad after next June, with thousands more in other cities around the country.

Advertisement Continue reading the main story

For his part, General Odierno made clear that the Iraqis still needed help — and that the United States would hardly disappear. “What I would say is, we’ll still maintain our very close partnership with the Iraqi security forces throughout Iraq, even after the summer,” he told reporters.

Military officials say they can accomplish that by “repurposing” whatever combat troops remain. Officially, a combat soldier is anyone trained in what are called combat-coded military occupation specialties — among them infantry, artillery and Special Forces — to engage the enemy. But combat troops can be given different missions. From the military’s point of view, a combat soldier is not so much what he is called but what he does.

For example, in an area south of Baghdad that was once called the “triangle of death” because of the Sunni insurgents there, a combat brigade of 4,000 to 5,000 soldiers of the 101st Airborne Division has been replaced with what the Army calls a transition task force of 800 to 1,200 troops with the mission of training and advising the Iraqi Army.

“It’s no longer Americans providing the muscle,” Colonel Nagl said. “Now it’s Iraqi patrols with a small group of American advisers tucked inside.”

Either way, no one expects the American presence to end soon, clearly not Defense Secretary Gates. When asked by Charlie Rose in a PBS interview last week how big the American “residual” force would be in Iraq after 2011, Mr. Gates replied that although the mission would change, “my guess is that you’re looking at perhaps several tens of thousands of American troops.”